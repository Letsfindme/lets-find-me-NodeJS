{"version":3,"sources":["../../src/routes/feed.js"],"names":["express","require","body","feedController","isAuth","router","Router","get","getPosts","post","trim","isLength","min","createPost","getPost","addComment","addRate","getTopFeed","getTopSearchFeed","put","updatePost","searchPost","deletePost","module","exports"],"mappings":";;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;eACiBA,OAAO,CAAC,mBAAD,C;IAAhBC,I,YAAAA,I;;AAER,IAAMC,cAAc,GAAGF,OAAO,CAAC,qBAAD,CAA9B;;AACA,IAAMG,MAAM,GAAGH,OAAO,CAAC,8BAAD,CAAtB;;AAEA,IAAMI,MAAM,GAAGL,OAAO,CAACM,MAAR,EAAf,C,CAEA;;AACAD,MAAM,CAACE,GAAP,CAAW,QAAX,EAAqBH,MAArB,EAA6BD,cAAc,CAACK,QAA5C,E,CAEA;;AACAH,MAAM,CAACI,IAAP,CACE,OADF,EAEEL,MAFF,EAGE,CACEF,IAAI,CAAC,OAAD,CAAJ,CACGQ,IADH,GAEGC,QAFH,CAEY;AAAEC,EAAAA,GAAG,EAAE;AAAP,CAFZ,CADF,EAIEV,IAAI,CAAC,SAAD,CAAJ,CACGQ,IADH,GAEGC,QAFH,CAEY;AAAEC,EAAAA,GAAG,EAAE;AAAP,CAFZ,CAJF,CAHF,EAWET,cAAc,CAACU,UAXjB;AAaA;;;;;AAIAR,MAAM,CAACE,GAAP,CAAW,cAAX,EAA0BH,MAA1B,EAAkCD,cAAc,CAACK,QAAjD;AAEAH,MAAM,CAACE,GAAP,CAAW,eAAX,EAA4BJ,cAAc,CAACW,OAA3C;AACAT,MAAM,CAACI,IAAP,CAAY,eAAZ,EAA6BL,MAA7B,EAAqCD,cAAc,CAACY,UAApD;AACAV,MAAM,CAACI,IAAP,CAAY,yBAAZ,EAAuCL,MAAvC,EAA+CD,cAAc,CAACa,OAA9D;AAEA;;;;;AAIAX,MAAM,CAACE,GAAP,CAAW,UAAX,EAAuBJ,cAAc,CAACc,UAAtC;AACAZ,MAAM,CAACE,GAAP,CAAW,YAAX,EAAyBJ,cAAc,CAACe,gBAAxC;AAEAb,MAAM,CAACc,GAAP,CACE,eADF,EAEEf,MAFF,EAGE,CACEF,IAAI,CAAC,OAAD,CAAJ,CACGQ,IADH,GAEGC,QAFH,CAEY;AAAEC,EAAAA,GAAG,EAAE;AAAP,CAFZ,CADF,EAIEV,IAAI,CAAC,SAAD,CAAJ,CACGQ,IADH,GAEGC,QAFH,CAEY;AAAEC,EAAAA,GAAG,EAAE;AAAP,CAFZ,CAJF,CAHF,EAWET,cAAc,CAACiB,UAXjB,E,CAcA;;AACAf,MAAM,CAACE,GAAP,CAAW,SAAX,EAAsBJ,cAAc,CAACkB,UAArC;AAEAhB,MAAM,UAAN,CAAc,eAAd,EAA+BD,MAA/B,EAAuCD,cAAc,CAACmB,UAAtD;AAEAC,MAAM,CAACC,OAAP,GAAiBnB,MAAjB","sourcesContent":["const express = require(\"express\");\nconst { body } = require(\"express-validator\");\n\nconst feedController = require(\"../controllers/feed\");\nconst isAuth = require(\"../middleware/authentication\");\n\nconst router = express.Router();\n\n// GET /feed/posts\nrouter.get(\"/posts\", isAuth, feedController.getPosts);\n\n// POST /feed/post\nrouter.post(\n  \"/post\",\n  isAuth,\n  [\n    body(\"title\")\n      .trim()\n      .isLength({ min: 5 }),\n    body(\"content\")\n      .trim()\n      .isLength({ min: 5 })\n  ],\n  feedController.createPost\n);\n/*\n * Get posts by user\n * /feed/user-posts/\n */\nrouter.get(\"/user-posts/\",isAuth, feedController.getPosts);\n\nrouter.get(\"/post/:postId\", feedController.getPost);\nrouter.post(\"/post/:postId\", isAuth, feedController.addComment);\nrouter.post(\"/post/:postId/:postRate\", isAuth, feedController.addRate);\n\n/**\n * Get Top noted feeds for home\n * /feed/topfeed\n */\nrouter.get(\"/topfeed\", feedController.getTopFeed);\nrouter.get(\"/topsearch\", feedController.getTopSearchFeed);\n\nrouter.put(\n  \"/post/:postId\",\n  isAuth,\n  [\n    body(\"title\")\n      .trim()\n      .isLength({ min: 5 }),\n    body(\"content\")\n      .trim()\n      .isLength({ min: 5 })\n  ],\n  feedController.updatePost\n);\n\n// Search for posts /feed/search\nrouter.get(\"/search\", feedController.searchPost);\n\nrouter.delete(\"/post/:postId\", isAuth, feedController.deletePost);\n\nmodule.exports = router;\n"],"file":"feed.js"}